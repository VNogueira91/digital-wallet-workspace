import{e}from"./p-8ff37cfd.js";bindableModelRequire=function e(t,n,o){function i(s,l){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!l&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var a=n[s]={exports:{}};t[s][0].call(a.exports,(function(e){return i(t[s][1][e]||e)}),a,a.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\builds\\tmp\\bindableModel.js":[function(e){void 0===window.process&&(window.process={}),e("./bindableModel_intermediar")},{"./bindableModel_intermediar":"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\builds\\tmp\\bindableModel_intermediar.js"}],"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\builds\\tmp\\bindableModel_intermediar.js":[function(e){(function(t){t.bindableModelLoadModules=function(){void 0===$$.__runtimeModules["overwrite-require"]&&($$.__runtimeModules["overwrite-require"]=e("overwrite-require")),void 0===$$.__runtimeModules.queue&&($$.__runtimeModules.queue=e("queue")),void 0===$$.__runtimeModules.soundpubsub&&($$.__runtimeModules.soundpubsub=e("soundpubsub")),void 0===$$.__runtimeModules["psk-bindable-model"]&&($$.__runtimeModules["psk-bindable-model"]=e("psk-bindable-model"))},t.bindableModelRequire=e,"undefined"!=typeof $$&&$$.requireBundle("bindableModel")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"overwrite-require":"overwrite-require","psk-bindable-model":"psk-bindable-model",queue:"queue",soundpubsub:"soundpubsub"}],"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\modules\\overwrite-require\\moduleConstants.js":[function(e,t){t.exports={BROWSER_ENVIRONMENT_TYPE:"browser",SERVICE_WORKER_ENVIRONMENT_TYPE:"service-worker",ISOLATE_ENVIRONMENT_TYPE:"isolate",THREAD_ENVIRONMENT_TYPE:"thread",NODEJS_ENVIRONMENT_TYPE:"nodejs"}},{}],"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\modules\\overwrite-require\\standardGlobalSymbols.js":[function(e){(function(t){let n=console;if(t.process&&"true"===process.env.NO_LOGS)console.log("Environment flag NO_LOGS is set, logging to console");else try{e("zeromq");const t=e("psklogger");n=t.PSKLogger.getLogger(),console.log("Logger init successful",process.pid)}catch(e){-1!==e.message.indexOf("psklogger")||-1!==e.message.indexOf("zeromq")?(console.log("Logger not available, using console"),n=console):console.log(e)}$$.registerGlobalSymbol=function(e,t){void 0===$$[e]?Object.defineProperty($$,e,{value:t,writable:!1}):n.error("Refusing to overwrite $$."+e)},console.warn=(...e)=>{console.log(...e)},$$.registerGlobalSymbol("autoThrow",(function(e){if(!e)throw e})),$$.registerGlobalSymbol("propagateError",(function(e,t){if(e)throw t(e),e})),$$.registerGlobalSymbol("logError",(function(e){e&&(console.log(e),$$.err(e))})),console.log("Fix the fixMe to not display on console but put in logs"),$$.registerGlobalSymbol("fixMe",(function(){})),$$.registerGlobalSymbol("exception",(function(e){throw new Error(e)})),$$.registerGlobalSymbol("throw",(function(e){throw new Error(e)})),$$.incomplete=function(...e){e.unshift("Incomplete feature touched:"),n.warn(...e)},$$.notImplemented=$$.incomplete,$$.registerGlobalSymbol("assert",(function(e,t){if(!e)throw new Error("Assert false "+t)})),$$.registerGlobalSymbol("flags",(function(){$$.incomplete("flags handling not implemented")})),$$.registerGlobalSymbol("obsolete",(function(...e){e.unshift("Obsolete feature:"),n.log(...e),console.log(...e)})),$$.registerGlobalSymbol("log",(function(...e){e.unshift("Log:"),n.log(...e)})),$$.registerGlobalSymbol("info",(function(...e){e.unshift("Info:"),n.log(...e),console.log(...e)})),$$.registerGlobalSymbol("err",(function(...e){e.unshift("Error:"),n.error(...e),console.error(...e)})),$$.registerGlobalSymbol("error",(function(...e){e.unshift("Error:"),n.error(...e),console.error(...e)})),$$.registerGlobalSymbol("warn",(function(...e){e.unshift("Warn:"),n.warn(...e),console.log(...e)})),$$.registerGlobalSymbol("syntaxError",(function(...e){e.unshift("Syntax error:"),n.error(...e);try{throw new Error("Syntax error or misspelled symbol!")}catch(t){console.error(...e),console.error(t.stack)}})),$$.invalidMemberName=function(e,t){let o="unknown";t&&t.meta&&(o=t.meta.swarmTypeName);const i="Invalid member name "+e+"in swarm "+o;console.error(i),n.err(i)},$$.registerGlobalSymbol("invalidSwarmName",(function(e){const t="Invalid swarm name "+e;console.error(t),n.err(t)})),$$.registerGlobalSymbol("unknownException",(function(...e){e.unshift("unknownException:"),n.err(...e),console.error(...e)})),$$.registerGlobalSymbol("event",(function(e,...t){n.hasOwnProperty("event")?n.event(e,...t):"status.domains.boot"===e&&console.log("Failing to console...",e,...t)})),$$.registerGlobalSymbol("redirectLog",(function(e,t){n.hasOwnProperty("redirect")&&n.redirect(e,t)})),$$.registerGlobalSymbol("throttlingEvent",(function(...e){n.log(...e)}))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{psklogger:!1}],"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\modules\\psk-bindable-model\\lib\\PskBindableModel.js":[function(e,t){const n=e("soundpubsub").soundPubSub,o=["copyWithin","fill","pop","push","reverse","shift","slice","sort","splice","unshift"];n.registerCompactor("chainChanged",(function(e,t){if("chainChanged"===e.type)return t}));let i=0;t.exports=class{static setModel(e){let t=void 0,r="Model."+i+".",s=new Set;const l={};function u(e,t){return e?e+"."+t:t}function c(e){return r+e}function a(e){return function(n,o,i){let r=u(e,o);return n[o]=i&&"object"==typeof i?f(i,r):i,t.notify(r),!0}}function f(e,i){if("object"!=typeof e)return e;let r,l,d,p,h=!i;h&&(r=function(e){(function(e){let t=new Set;t.add("*");let n=e.split(".").map(e=>e.trim()),o="";for(let e=0;e<n.length;e++)0!==e?o+="."+n[e]:o=n[e],t.add(o);return s.forEach(n=>{n.startsWith(e)&&t.add(n)}),t})(e).forEach(e=>{n.publish(c(e),{type:"chainChanged",chain:e})})},d=function(e){return e?e.split(".").map(e=>e.trim()).reduce((e,t)=>{if(null!=e)return e[t]},t):t},p=function(e,n){return e.split(".").map(e=>e.trim()).reduce((e,t,o,i)=>{if(null!=e)return o===i.length-1?(e[t]=n,!0):e=e[t]},t)},l=function(e,t){s.add(e),n.subscribe(c(e),t)});let b=a(i),w={apply:function(){throw new Error("A function call was not expected inside proxy!")},constructor:function(){throw new Error("A constructor call was not expected inside proxy!")},isExtensible:function(e){return Reflect.isExtensible(e)},preventExtensions:function(e){return Reflect.preventExtensions(e)},get:function(e,t){if(h)switch(t){case"onChange":return l;case"notify":return r;case"getChainValue":return d;case"setChainValue":return p}return e[t]},set:a(i),deleteProperty:function(e,t){delete e[t]},ownKeys:function(e){return Reflect.ownKeys(e)},has:function(e,t){return t in e},defineProperty:function(e,t,n){let o=Object.assign({},n);return o.set=function(e,t,o){n.hasOwnProperty("set")&&n.set(e,t,o),b(e,t,o)},Object.defineProperty(e,t,o)},getOwnPropertyDescriptor:function(e,t){return Object.getOwnPropertyDescriptor(e,t)},getPrototypeOf:function(e){return Reflect.getPrototypeOf(e)},setPrototypeOf:function(e,t){Reflect.setPrototypeOf(e,t)}};return Array.isArray(e)&&(w.get=function(e){return function(n,i){const r=n[i];if("function"==typeof r)switch(i){case"push":return function(e,n){return function(){try{let o=Array.prototype.push.apply(e,arguments);return t.notify(u(n,o-1)),o}catch(e){throw console.log("An error occurred in Proxy"),e}}}(n,e);default:return function(e,n,i){return function(){try{let r=Array.prototype[e].apply(n,arguments);return-1!==o.indexOf(e)&&t.notify(i),r}catch(e){throw console.log("An error occurred in Proxy"),e}}}(i,n,e)}return r}}(i)),Object.keys(e).forEach(t=>{e[t]&&(e[t]=f(e[t],u(i,t)))}),new Proxy(e,w)}return i++,t=f(e),t.toObject=function(e){let n={};return e?"string"==typeof e&&(n=t.getChainValue(e)):n=t,n&&"object"==typeof n?JSON.parse(JSON.stringify(n)):n},t.addExpression=function(e,n,...o){if("string"!=typeof e||!e.length)throw new Error("Expression name must be a valid string");if("function"!=typeof n)throw new Error("Expression must have a callback");let i=[];if(o.length){let e=o;Array.isArray(e[0])&&(e=e[0]),i=e.filter(e=>"string"==typeof e&&e.length)}l[e]={watchChain:i,callback:function(){return n.call(t)}}},t.evaluateExpression=function(e){if(!this.hasExpression(e))throw new Error(`Expression "${e}" is not defined`);return l[e].callback()},t.hasExpression=function(e){return"object"==typeof l[e]&&"function"==typeof l[e].callback},t.onChangeExpressionChain=function(e,t){if(!this.hasExpression(e))throw new Error(`Expression "${e}" is not defined`);const n=l[e];if(n.watchChain.length)for(let e=0;e<n.watchChain.length;e++)this.onChange(n.watchChain[e],t)},t}}},{soundpubsub:"soundpubsub"}],"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\modules\\soundpubsub\\lib\\soundPubSub.js":[function(e,t,n){const o=e("queue");n.soundPubSub=new function(){this.publish=function(e,s){return a(e)||function(e){var t=!1;return e&&"object"==typeof e||(t=!0,wprint("Invalid messages types: "+e)),t}(s)||void 0===t[e]?null:(function(e,t){var s=!1,l=n[e];if(void 0===l&&(l=new o,n[e]=l),t&&void 0!==t.type){var u=i[t.type];if(void 0!==u)for(let e of l)if(u(t,e)===e&&void 0===e.__transmisionIndex){s=!0;break}}!s&&t&&(l.push(t),r.push(e))}(e,s),setTimeout(l,0),t[e].length)},this.subscribe=function(e,n,o,i){if(!a(e)&&!f(n)){var r={callBack:n,waitForMore:o,filter:i},s=t[e];void 0===s&&(t[e]=s=[]),s.push(r)}},this.unsubscribe=function(e,n,o){if(!f(n)){var i=!1;if(t[e])for(var r=0;r<t[e].length;r++){var s=t[e][r];s.callBack!==n||void 0!==o&&s.filter!==o||(i=!0,s.forDelete=!0,s.callBack=void 0,s.filter=void 0)}i||wprint("Unable to unsubscribe a callback that was not subscribed!")}},this.blockCallBacks=function(){s++},this.releaseCallBacks=function(){for(s--;0===s&&l(!0););for(;0===s&&c(););},this.afterAllEvents=function(e){f(e)||u.push(e),this.blockCallBacks(),this.releaseCallBacks()},this.hasChannel=function(e){return!a(e)&&void 0!==t[e]},this.addChannel=function(e){a(e)||this.hasChannel(e)||(t[e]=[])};var e=this,t={},n={},i={},r=new o,s=0;function l(o){if(s>0)return!1;const i=r.front();if(void 0!==i){e.blockCallBacks();try{let e;if(n[i].isEmpty()||(e=n[i].front()),void 0===e)n[i].isEmpty()||wprint("Can't use as message in a pub/sub channel this object: "+e),r.pop();else{if(void 0===e.__transmisionIndex){e.__transmisionIndex=0;for(var l=t[i].length-1;l>=0;l--){var u=t[i][l];!0===u.forDelete&&t[i].splice(l,1)}}else e.__transmisionIndex++;void 0===e.__transmisionIndex&&wprint("Can't use as message in a pub/sub channel this object: "+e),void 0===(u=t[i][e.__transmisionIndex])?(delete e.__transmisionIndex,n[i].pop()):(null==u.filter||!f(u.filter)&&u.filter(e))&&(u.forDelete||(u.callBack(e),!u.waitForMore||f(u.waitForMore)||u.waitForMore(e)||(u.forDelete=!0)))}}catch(e){wprint("Event callback failed: "+u.callBack+"error: "+e.stack)}return o?s--:e.releaseCallBacks(),!0}return!1}this.registerCompactor=function(e,t){f(t)||(i[e]=t)};var u=new o;function c(){return u.isEmpty()||u.pop()(),!u.isEmpty()}function a(e){var t=!1;return(!e||"string"!=typeof e&&"number"!=typeof e)&&(t=!0,wprint("Invalid channel name: "+e)),t}function f(e){var t=!1;return e&&"function"==typeof e||(t=!0,wprint("Expected to be function but is: "+e)),t}}},{queue:"queue"}],"overwrite-require":[function(e,t){(function(n){t.exports={enableForEnvironment:function(t){const o=e("./moduleConstants");switch(t){case o.BROWSER_ENVIRONMENT_TYPE:n=window;break;case o.SERVICE_WORKER_ENVIRONMENT_TYPE:n=self}void 0===n.$$&&(n.$$={}),void 0===$$.__global&&($$.__global={}),Object.defineProperty($$,"environmentType",{get:function(){return t},set:function(){throw Error("Environment type already set!")}}),void 0===$$.__global.requireLibrariesNames&&($$.__global.currentLibraryName=null,$$.__global.requireLibrariesNames={}),void 0===$$.__runtimeModules&&($$.__runtimeModules={}),void 0===n.functionUndefined&&(n.functionUndefined=function(){throw console.log("Called of an undefined function!!!!"),new Error("Called of an undefined function")},void 0===n.webshimsRequire&&(n.webshimsRequire=n.functionUndefined),void 0===n.domainRequire&&(n.domainRequire=n.functionUndefined),void 0===n.pskruntimeRequire&&(n.pskruntimeRequire=n.functionUndefined));const i={};function r(e){return $$.__runtimeModules[e]}function s(e,t){let o,r;e?(o=$$.__requireFunctionsChain.slice(),o.push(e)):o=$$.__requireFunctionsChain,function(e){if(i[e]){const t=new Error("Preventing recursive require for "+e);throw t.type="PSKIgnorableError",t}}(t),function(e){i[e]=!0}(t);let s=!1;$$.__global.currentLibraryName||($$.__global.currentLibraryName=t,void 0===$$.__global.requireLibrariesNames[t]&&($$.__global.requireLibrariesNames[t]={}),s=!0);for(let e=0;e<o.length;e++){const i=o[e];try{if(i===n.functionUndefined)continue;if(r=i(t),r)break}catch(e){}}if(!r)throw Error("Failed to load module "+t);return function(e){i[e]=!1}(t),s&&($$.__global.currentLibraryName=null),r}if(e("./standardGlobalSymbols.js"),void 0===$$.require)switch($$.__requireList=["webshimsRequire"],$$.__requireFunctionsChain=[],$$.requireBundle=function(e){$$.__requireList.push(e+="Require");const t=[r];$$.__requireList.forEach((function(e){const o=function(e){const t=n[e];return void 0===t||t===n.functionUndefined?null:function(e){const n=t(e);return $$.__runtimeModules[e]=n,n}}(e);o&&t.push(o)})),$$.__requireFunctionsChain=t},$$.requireBundle("init"),$$.environmentType){case o.BROWSER_ENVIRONMENT_TYPE:case o.SERVICE_WORKER_ENVIRONMENT_TYPE:console.log("Defining global require in browser"),n.require=function(e){return s(null,e)},$$.require=e;break;case o.ISOLATE_ENVIRONMENT_TYPE:!function(){$$.requireBundle("sandboxBase");const t=n.require;n.crypto=e("crypto"),n.require=function(e){const n=this;let o;return o=s((function(...o){let i;try{i=t.apply(n,o)}catch(o){if("MODULE_NOT_FOUND"!==o.code)throw o;{const o=path.join(process.cwd(),e);i=t.apply(n,[o]),e=o}}return i}),e),o}}(),$$.require=e;break;default:$$.require=function(){const t=e("path");$$.__runtimeModules.crypto=e("crypto"),$$.__runtimeModules.util=e("util");const n=e("module");$$.__runtimeModules.module=n,console.log("Redefining require for node"),$$.__originalRequire=n._load;const o=n.prototype.require;function i(e){const n=this;return s((function(...i){let r;try{r=o.apply(n,i)}catch(i){if("MODULE_NOT_FOUND"!==i.code)throw i;{let i=e;(i.startsWith("/")||i.startsWith("./")||i.startsWith("../"))&&(i=t.join(process.cwd(),e)),r=o.call(n,i),e=i}}return r}),e)}return n.prototype.require=i,i}()}},constants:e("./moduleConstants")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./moduleConstants":"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\modules\\overwrite-require\\moduleConstants.js","./standardGlobalSymbols.js":"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\modules\\overwrite-require\\standardGlobalSymbols.js"}],"psk-bindable-model":[function(e,t){t.exports=e("./lib/PskBindableModel")},{"./lib/PskBindableModel":"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\modules\\psk-bindable-model\\lib\\PskBindableModel.js"}],queue:[function(e,t){function n(e){this.content=e,this.next=null}function o(){this.head=null,this.tail=null,this.length=0,this.push=function(e){const t=new n(e);this.head?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),this.length++},this.pop=function(){if(!this.head)return null;const e=this.head;return this.head=this.head.next,this.length--,0===this.length&&(this.tail=null),e.content},this.front=function(){return this.head?this.head.content:void 0},this.isEmpty=function(){return null===this.head},this[Symbol.iterator]=function*(){let e=this.head;for(;null!==e;)yield e.content,e=e.next}.bind(this)}o.prototype.inspect=o.prototype.toString=function(){let e="",t=this.head;for(;t;)e+=JSON.stringify(t.content)+" ",t=t.next;return e},t.exports=o},{}],soundpubsub:[function(e,t){t.exports={soundPubSub:e("./lib/soundPubSub").soundPubSub}},{"./lib/soundPubSub":"D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\modules\\soundpubsub\\lib\\soundPubSub.js"}]},{},["D:\\work\\git\\webcomponents\\psk-enterprise-workspace\\privatesky\\builds\\tmp\\bindableModel.js"]);const t=bindableModelRequire("psk-bindable-model");function n(t,n,o){e(t,{method:"POST",body:n}).then(e=>e.json().then(t=>{if(!e.ok||201!=e.status){let e="";Array.isArray(t)&&t.length?e=`${t[0].error.message}. Code: ${t[0].error.code}`:"object"==typeof t&&(e=t.message?t.message:JSON.stringify(t));let n=new Error(e);throw n.data=t,n}if(Array.isArray(t)){let e=[];for(const n of t)console.log(`Uploaded ${n.file.name} to ${n.result.path}`),e.push(n.result.path);o(void 0,e.length>1?e:e[0])}})).catch(e=>o(e))}function o(e,t,o,i){"function"==typeof o&&(i=o,o=void 0);const r=new FormData;let s="file";if(Array.isArray(t))for(const e of t)s="files[]",r.append(s,e);else r.append(s,t);let l=`/upload?path=${e}&input=${s}`;void 0!==o&&o.preventOverwrite&&(l+="&preventOverwrite=true"),n(l,r,i)}function i(t,n){Array.isArray(t)||(t=[t]);let o=[],i=[],r=s=>{let l=s;"/"!==s[0]&&(s="/"+s),function(t,n){e(t,{method:"DELETE"}).then(e=>{if(!e.ok)throw new Error(e.statusText);n()}).catch(e=>n(e))}("/delete"+s,e=>{if(e?o.push({filename:l,message:e.message}):i.push(l),t.length>0)return r(t.shift());n(o.length?o:void 0,i)})};r(t.shift())}class r{constructor(e,t){this.directAccessEnabled=!1}enableDirectAccess(e){let t=this;!function(){if(t.directAccessEnabled)e(void 0,!0);else{let n=require("opendsu").loadAPI("sc"),o=["addFile","addFiles","addFolder","appendToFile","createFolder","delete","extractFile","extractFolder","getArchiveForPath","getCreationSSI","getKeySSI","listFiles","listFolders","mount","readDir","readFile","rename","unmount","writeFile","listMountedDSUs","beginBatch","commitBatch","cancelBatch"];n.getMainDSU((n,i)=>{for(let e of o)t[e]=i[e];t.directAccessEnabled=!0,e(void 0,!0)})}}()}call(t,...n){if(0===n.length)throw Error("Missing arguments. Usage: call(functionName, arg1, arg2 ... callback)");const o=n.pop(),i="/api?"+new URLSearchParams({name:t,arguments:JSON.stringify(n)});e(i,{method:"GET"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}).then(e=>{o(...e)}).catch(e=>o(e))}setObject(e,t,n){try{let o=JSON.stringify(t);this.setItem(e,o,n)}catch(e){n(createOpenDSUErrorWrapper("setObject failed",e))}}getObject(e,t){this.getItem(e,"json",(function(e,n){if(e||!n)return t(void 0,void 0);t(void 0,n)}))}setItem(e,t,o){if(this.directAccessEnabled)this.writeFile(e,t,o);else{let i=e.split("/"),r=i.splice(i.length-1,1)[0];(e=i.join("/"))||(e="/"),n(`/upload?path=${e}&filename=${r}`,t,o)}}getItem(t,n,o){"function"==typeof n&&(o=n,n="arrayBuffer"),this.directAccessEnabled?this.readFile(t,(function(e,t){if(e)return o(e);try{"json"==n&&(t=JSON.parse(t.toString()))}catch(e){return o(e)}o(void 0,t)})):("/"!==t[0]&&(t="/"+t),function(t,n,o){e(t).then(e=>{if(!e.ok)throw new Error(e.statusText);e[n]().then(e=>o(void 0,e)).catch(e=>{throw e})}).catch(e=>o(e))}(t="/download"+t,n,o))}uploadFile(e,t,n,i){o(...arguments)}uploadMultipleFiles(e,t,n,i){o(...arguments)}deleteObjects(e,t){i(e,t)}removeFile(e,t){console.log("[Warning] - obsolete. Use DSU.deleteObjects"),i([e],t)}removeFiles(e,t){console.log("[Warning] - obsolete. Use DSU.deleteObjects"),i(e,t)}}class s{constructor(e,t){this.element=e,this.history=t}navigateToPageByTag(e,t){this.__getTagPage(e,(e,n)=>{e||this.navigateToPageByUrl(n,t)})}navigateToPageByUrl(e,t){let n={pathname:e};t&&(n.state=t),this.history.push(n)}getState(){return this.history.win.history.state.state}__getTagPage(e,t){this.element.dispatchEvent(new CustomEvent("getTags",{bubbles:!0,cancelable:!0,composed:!0,detail:(n,o)=>n?t(n):o[e]?void t(void 0,o[e]):t(new Error(`No page with tag: '${e}'`))}))}}class l{constructor(e,n){this.element=e,this.DSUStorage=new r,this.History=new s(e,n),this.modalsUrls=null;let o=[];this.setModel=e=>(this.model=t.setModel(e),o.forEach(e=>{e()}),this.model),this.onModelReady=e=>{if(void 0!==this.model)return e();o.push(e)},(()=>{e.addEventListener("getModelEvent",e=>{e.preventDefault(),e.stopImmediatePropagation();let{bindValue:t,callback:n}=e.detail;if("function"==typeof n)return this.onModelReady(()=>{!function(e,t,n){e&&t[e]&&n(null,t[e]),e||n(null,t)}(t,this.model,n)});n(new Error("No callback provided"))})})()}on(e,t,n){try{this._checkArguments(e,t,n),this.element.addEventListener(e,t,n)}catch(e){console.error(e)}}off(e,t,n){try{this._checkArguments(e,t,n),this.element.removeEventListener(e,t,n)}catch(e){console.error(e)}}send(e,t,n){if(n||(n={bubbles:!0,cancelable:!0,composed:!0,detail:t}),!e||0===e.trim().length)throw new Error(`\n      Argument eventName is not valid. It must bea non-empty string.\n      Provided value: ${e}\n      `);this.element.dispatchEvent(new CustomEvent(e,n))}_checkArguments(e,t,n){if("string"!=typeof e||0===e.trim().length)throw new Error(`\n      Argument eventName is not valid. It must be a non-empty string.\n      Provided value: ${e}\n      `);if("function"!=typeof t)throw new Error(`\n      Argument listener is not valid, it must be a function.\n      Provided value: ${t}\n      `);if(n&&"boolean"!=typeof n&&"object"!=typeof n)throw new Error(`\n      Argument options is not valid, it must a boolean (true/false) in case of capture, or an options object.\n      If no options are needed, this argument can be left empty.\n      Provided value: ${n}\n      `)}__getModalsUrl(e){if(this.modalsUrls)return e(void 0,this.modalsUrls);let t=new CustomEvent("getModals",{bubbles:!0,cancelable:!0,composed:!0,detail:e});this.element.dispatchEvent(t)}__constructModalElement(e){let t=this.element.querySelector("psk-page-loader[data-type=modal]");t||(t=document.createElement("psk-page-loader"),this.element.append(t),t.setAttribute("data-type","modal")),t.setAttribute("page-url",e)}showModal(e,t,n=(()=>{})){const o=(...e)=>{this.hideModal(),console.log("Hide modal is called from completeCallback"),n(...e)},i=function(e){(0,e.data.callback)(void 0,t,o)};this.__getModalsUrl((t,n)=>{if(t)return void console.error("Modals error:"+t.message);if(this.modalsUrls=n,!this.modalsUrls)return void console.error("Modal "+e+"is not configured");let o=n[e];if(!o)return console.error(`Modal with name ${e} does not exists. Did you forgot to add it in config.json?`);this.__constructModalElement(o),this.element.addEventListener("bindModalData",i),this.element.addEventListener("closeModal",this.hideModal.bind(this,i))})}hideModal(e){let t=this.element.querySelector("psk-page-loader[data-type=modal]");t&&t.remove(),e&&this.element.removeEventListener("bindModalData",e)}showFeedbackMessage(e,t,n){t=t||"Message",n=n||"alert","function"==typeof this.feedbackEmitter?this.feedbackEmitter(e,t,n):(console.log("Log user relevant messages & Errors:",e),alert(e))}showError(e,t,n){let o;t=t||"Validation Error",n=n||"alert-danger",o=e instanceof Error?e.message:"object"==typeof e?e.toString():e,this.showFeedbackMessage(o,t,n)}showErrorModalAndRedirect(e,t,n){n||(n=5e3),this.element.dispatchEvent(new Event("closeModal")),this.showModal("loadingModal",{title:"Error",description:e}),setTimeout(()=>{this.element.dispatchEvent(new Event("closeModal")),this.History.navigateToPageByTag(t)},n)}displayModal(e,t,n="loadingModal"){t||(t="Info"),this.showModal(n,{title:t,description:e})}displayConfigurableModal(e){let t={title:"Info",modalName:"loadingModal",modalContent:{},modalOptions:{}};Object.assign(t,e),this.showModal(t.modalName,{title:t.title,modalContent:t.modalContent,modalOptions:t.modalOptions})}closeModal(){this.element.dispatchEvent(new Event("closeModal"))}}export{l as C}